files:
  "/etc/nginx/conf.d/01_upload_limit.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Allow large file uploads (up to 100MB)
      # Default Nginx on EB is 1MB which causes 413 Entity Too Large errors
      client_max_body_size 100M;
      
      # Increase timeout for large file uploads
      client_body_timeout 300s;
      
      # Increase buffer sizes for file uploads
      client_body_buffer_size 128k;

container_commands:
  01_reload_nginx:
    command: "sudo service nginx reload"
    ignoreErrors: true
